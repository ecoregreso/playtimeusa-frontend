<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cashier - Create Ticket</title>
  <style>
    body {
      font-family: Ubuntu, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #0a0a20;
      min-height: 100vh;
      color: #fff;
    }

    h2 {
      margin: 20px 0;
      color: #ffae00;
      text-shadow: 2px 2px 8px #7e03aa;
    }

    label, input {
      font-size: 18px;
      margin-right: 10px;
    }

    input[type="number"] {
      padding: 8px;
      width: 100px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    /* Button styling */
    .btn {
  --border-color: linear-gradient(-45deg, #ffae00, #7e03aa, #00fffb);
  --border-width: 0.125em;
  --curve-size: 0.5em;
  --blur: 30px;
  --bg: #080312;
  --color: #afffff;
  color: var(--color);
  cursor: pointer;
  /* use position: relative; so that BG is only for .btn */
  position: relative;
  isolation: isolate;
  display: inline-grid;
  place-content: center;
  padding: 0.5em 1.5em;
  font-size: 17px;
  border: 0;
  text-transform: uppercase;
  box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.6);
  clip-path: polygon(
    /* Top-left */ 0% var(--curve-size),
    var(--curve-size) 0,
    /* top-right */ 100% 0,
    100% calc(100% - var(--curve-size)),
    /* bottom-right 1 */ calc(100% - var(--curve-size)) 100%,
    /* bottom-right 2 */ 0 100%
  );
  transition: color 250ms;
}

.btn::after,
.btn::before {
  content: "";
  position: absolute;
  inset: 0;
}

.btn::before {
  background: var(--border-color);
  background-size: 300% 300%;
  animation: move-bg7234 5s ease infinite;
  z-index: -2;
}

@keyframes move-bg7234 {
  0% {
    background-position: 31% 0%;
  }

  50% {
    background-position: 70% 100%;
  }

  100% {
    background-position: 31% 0%;
  }
}

.btn::after {
  background: var(--bg);
  z-index: -1;
  clip-path: polygon(
    /* Top-left */ var(--border-width)
      calc(var(--curve-size) + var(--border-width) * 0.5),
    calc(var(--curve-size) + var(--border-width) * 0.5) var(--border-width),
    /* top-right */ calc(100% - var(--border-width)) var(--border-width),
    calc(100% - var(--border-width))
      calc(100% - calc(var(--curve-size) + var(--border-width) * 0.5)),
    /* bottom-right 1 */
      calc(100% - calc(var(--curve-size) + var(--border-width) * 0.5))
      calc(100% - var(--border-width)),
    /* bottom-right 2 */ var(--border-width) calc(100% - var(--border-width))
  );
  transition: clip-path 500ms;
}

.btn:where(:hover, :focus)::after {
  clip-path: polygon(
    /* Top-left */ calc(100% - var(--border-width))
      calc(100% - calc(var(--curve-size) + var(--border-width) * 0.5)),
    calc(100% - var(--border-width)) var(--border-width),
    /* top-right */ calc(100% - var(--border-width)) var(--border-width),
    calc(100% - var(--border-width))
      calc(100% - calc(var(--curve-size) + var(--border-width) * 0.5)),
    /* bottom-right 1 */
      calc(100% - calc(var(--curve-size) + var(--border-width) * 0.5))
      calc(100% - var(--border-width)),
    /* bottom-right 2 */
      calc(100% - calc(var(--curve-size) + var(--border-width) * 0.5))
      calc(100% - var(--border-width))
  );
  transition: 200ms;
}

.btn:where(:hover, :focus) {
  color: #fff;
}

    /* Voucher card styling as ticket stub */
    #voucher {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .voucher {
      background: #111;
      border: 3px dashed #ffae00;
      border-radius: 15px;
      box-shadow: 0 0 20px #ffae00, 0 0 40px #7e03aa, 0 0 60px #00fffb;
      padding: 20px;
      width: 360px;
      text-align: center;
      margin-bottom: 15px;
      position: relative;
      overflow: hidden;
      clip-path: polygon(
        20px 0%, calc(100% - 20px) 0%, 100% 20px, 100% calc(100% - 20px),
        calc(100% - 20px) 100%, 20px 100%, 0% calc(100% - 20px), 0% 20px
      );
    }

    .voucher::before {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(120deg, rgba(255,255,255,0.15), rgba(255,255,255,0));
      transform: rotate(25deg);
      animation: shine 3s infinite linear;
    }

    @keyframes shine {
      0% { transform: rotate(25deg) translateX(-200%); }
      100% { transform: rotate(25deg) translateX(200%); }
    }

    .voucher::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 0;
      width: 100%;
      border-top: 2px dashed #7e03aa;
      pointer-events: none;
    }

    .voucher h3 {
      margin-bottom: 10px;
      background: linear-gradient(90deg, #ffae00, #7e03aa, #00fffb);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 24px;
    }

    .voucher p {
      margin: 5px 0;
      font-size: 16px;
    }

    .voucher img {
      width: 160px;
      margin: 15px 0;
    }

    a {
      color: #00fffb;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    @media (max-width: 400px) {
      .voucher {
        width: 90%;
        padding: 15px;
      }

      input[type="number"] {
        width: 80px;
      }
    }
  </style>
</head>
<body>
  <h2>Cashier - Create Voucher</h2>

  <div>
    <label for="amount">Enter Amount:</label>
    <input type="number" id="amount" min="1" />
    <button id="create" class="btn">Create Voucher</button>
  </div>

  <div id="voucher"></div>

   <script>
    document.getElementById('create').addEventListener('click', async () => {
      const amount = document.getElementById('amount').value;
      if (!amount) {
        alert("Enter an amount first");
        return;
      }

      const res = await fetch('http://localhost:3000/api/cashier/voucher', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount })
      });

      const data = await res.json();
      if (data.error) {
        alert(data.error);
        return;
      }

      document.getElementById('voucher').innerHTML = `
        <div class="voucher" id="voucherSlip">
          <h3>üéüÔ∏è Casino Voucher</h3>
          <p><b>User Code:</b> ${data.userCode}</p>
          <p><b>PIN:</b> ${data.pin}</p>
          <p><b>Amount:</b> $${data.amount}</p>
          <p><b>Bonus:</b> $${data.bonus}</p>
          <p><b>Login Link:</b> <a href="${data.loginUrl}" target="_blank">${data.loginUrl}</a></p>
          <img src="${data.qrCode}" alt="QR Code" />
        </div>
        <button onclick="window.print()">üñ®Ô∏è Print Voucher</button>
      `;
    });
  </script>
</body>
</html>

